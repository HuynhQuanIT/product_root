<%- include('../partials/header') %>
<div class="container">
  <h2 class="mt-4 mb-3"><%= product && product._id ? 'Edit Product' : 'New Product' %></h2>
  <form action="<%= product && product._id ? '/products/' + product._id + '?_method=PUT' : '/products' %>" method="POST" class="row g-3">
    <div class="col-md-6">
      <label class="form-label">Product name</label>
      <input name="name" required class="form-control" placeholder="Product name" value="<%= product.name || '' %>">
    </div>
    <div class="col-md-3">
      <label class="form-label">Price</label>
      <input name="price" type="number" step="0.01" required class="form-control" placeholder="Price" value="<%= product.price || 0 %>">
    </div>
    <div class="col-md-3">
      <label class="form-label">Quantity</label>
      <input name="quantity" type="number" required class="form-control" placeholder="Quantity" value="<%= product.quantity || 0 %>">
    </div>
    <div class="col-md-6">
      <label class="form-label">Supplier</label>
      <select name="supplierId" required class="form-select">
        <option value="">--Select--</option>
        <% suppliers.forEach(s => { %>
          <option value="<%= s._id %>" <%= product.supplierId && product.supplierId.equals && product.supplierId.equals(s._id) ? 'selected' : (product.supplierId == s._id ? 'selected' : '') %>><%= s.name %></option>
        <% }) %>
      </select>
    </div>
    <div class="col-12">
      <button type="submit" class="btn btn-primary"><%= product && product._id ? 'Update' : 'Create' %></button>
    </div>
  </form>
</div>
<%- include('../partials/footer') %>