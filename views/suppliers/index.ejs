<%- include('../partials/header') %>
<div class="container">
  <h2 class="mt-4 mb-3">Suppliers</h2>
  <% if (currentUser && currentUser.role === 'admin') { %>
    <a href="/suppliers/new" class="btn btn-success mb-3">Add Supplier</a>
  <% } %>
  <div class="list-group">
    <% suppliers.forEach(s => { %>
      <div class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <strong><%= s.name %></strong> &mdash; <%= s.address %> &mdash; <%= s.phone %>
        </div>
        <% if (currentUser && currentUser.role === 'admin') { %>
          <div>
            <a href="/suppliers/<%= s._id %>/edit" class="btn btn-sm btn-warning me-1">Edit</a>
            <form action="/suppliers/<%= s._id %>?_method=DELETE" method="POST" style="display:inline">
              <button type="submit" class="btn btn-sm btn-danger">Delete</button>
            </form>
          </div>
        <% } %>
      </div>
    <% }) %>
  </div>
</div>
<%- include('../partials/footer') %>